d1
  -- $ degrade
  $ s "cpu!16"
  # n (run 16)

--------------------------------------------------------------------------------
-- https://tidalcycles.org/docs/patternlib/tutorials/course1/
--------------------------------------------------------------------------------

-- week 2 lesson 1
d1
  $ n "0 0 [4 3] 4"
  # sound "cpu"
  # crush 4
  -- # vowel "a e i o u"

-- week 2 lesson 2
d1
  $ fast "0.5 2"
  $ n "0 2 [3 5] [4 7]"
  # s "cpu"

d2
  $ n "0(3,8) 8*8"
  # s "cpu2"
  # cps "0.3 0.6"

d2 $ n "0 [~ 1] 2*2 3 4*3 5 ~ 7" # sound "cpu2"
    # cps "<0.5 2> [1 0.75] <2 1>"

d1 $ slow "0.5 <1 2>" $ n "0 2 [3 5] [4 7]" # sound "cpu"

d1 $ slow "0.5 <1 2>" $
  n "{0 2 [3 5] [4 <7 6>], 0*2 3*3 0}" # sound "cpu"
  # squiz "<8 1 2>"

d1 $ slow "0.5 <1 2>" $
    n "{0 2 [3 5] [4 <7 6>], 0*2 3*3 0}" # sound "cpu"
    # squiz "<8 1 2>"
    # speed 2

-- week 2 lesson 3
-- |> is the same as #

d1
  $ speed "1(3,8) [3 4 7 11] [0.5*2 1.5]"
  # sound "dsynth"
  * speed "1 0.5 3"

d1
  $ hurry "<2 1>"
  $ n "0 1 0 [2 4] 2 4 1*2 3"
  # sound "cpu"

d1 $ n "0 1 2 3" # sound "numbers" |> n "4 5"

d1 $ n "0 1 2 3" # sound "numbers" |<| n "4 5"

d1 $ n "0 1 2 3" # sound "numbers" |+ n "4 5"

d1
  $ every 2 (hurry 4)
  $ n "0 1 2 3"
  # sound "numbers"
  +| n "4 5"

d1 $ n ("7 5 [2 7] 0" |+ "<-12 0 12>") # sound "superpiano"

d1 $ n "0(5,8) [4 1]" # sound "drum"
  # squiz "0 2 5"
  + squiz "<0 2 3>"

d1 $ n "[0 4 2] [4 1] 3 [2 0] 3 [3 1] 4 4" # sound "cpu"
  # squiz 3
  # speed "1 [2 3] 3"
  |+ speed (slow 4 saw)

-- week 3 lesson 1
d1 $ every 2 (hurry 2) $ every 3 (rev) $ fast 2 $ sound "cpu bd sd hh"

-- week 3 lesson 2
-- I think I already went through cut vs legato when I went
-- through the "workshop" page

-- week 3 lesson 3
d1
  -- $ jux rev
  $ splice 8 "[0 4 2] [4 1] 3 [2 0] 3 [3 1] 4 4"
  $ sound "break:4"

d1
  -- $ slice 8 "[0 4 2] [4 1] 3 [2 0] 3 [3 1] 4 4"
  $ slice 8 "0 2 [3 5] [4 <7 6>]"
  $ sound "break"
  # n (run 16)

--------------------------------------------------------------------------------
-- week 4 lesson 1
-- https://tidalcycles.org/docs/patternlib/tutorials/course1#week-4
--------------------------------------------------------------------------------

d1 $ sound "bd*16" # speed (sine + 0.5)

d1 $ sound "bd*8" # speed 1

-- without segment, there will be no events because a continuous function
-- like sine doesn't have discrete events
-- tidal needs a way to determine events
d1 $ speed (segment 16 $ range 0.5 2.5 sine) # sound "bd:2"

d1 $
  speed (struct "t f!2 t f!2 t f!3 t f t f!3" $ range 0.5 2.5 sine)
  # sound "bd"
  # n (run 7)

d2 $ s "~!4 sn:1 ~!3"

d1
  $ every 4 (jux rev)
  $ sound "[bd!3 sn:1]*8"
  # speed (range 0.5 2.5 saw)
  # n (slow 3 $ run 7)
  # room 0.6
  # sz (slow 8 saw)

d1 $ sound "bd:3*16" # (speed (rand * (1)))

--------------------------------------------------------------------------------
-- week 4 lesson 2, random marathon (using more randomness in tidal)
-- https://tidalcycles.org/docs/patternlib/tutorials/course1#week-4
--------------------------------------------------------------------------------

resetCycles

d1
  $ repeatCycles 4
  $ n "0*8"
  # sound "cpu"
  # speed (rand + 1)

-- irand
d1
  $ n (scale "ionian" $ struct "t(5,8)" $ (irand 8) + 24)
  # sound "rash"

d1
  $ repeatCycles 16
  $ n "[0 1 2 3 4] 5 6 7 8 9"
  # sound "cpu"

-- each event in this pattern will get the `?`
d1 $ s "bd*16?"

-- Not sure yet how scramble is different from `?`
-- Okay, so scramble is "sampling with replacement"
-- Meaning it will divide the pattern into N parts,
-- then return a new pattern by randomly selecting
-- from the parts
d1
  $ scramble 4
  $ n "0 [1 ~ ~ 1 ~ ~ ~ ~ ~] 2!8 3"
  # s "arpy"

-- shuffle on the other hand is sampling without replacement
-- We can also think of this as a permutation of the input
-- pattern.
d1
  $ shuffle 4
  $ n "0 [1 ~ ~ 1 ~ ~ ~ ~ ~] 2!8 3"
  # s "arpy"

-- choose
d1
  $ sound (segment 16 $ choose ["bd", "arpy", "kick", "snare"])

d1
  $ sound (struct "t(5,8,<0 1 0 2>)" $ choose ["bd", "arpy", "kick", "snare"])

-- :t wchoose
resetCycles

d1
  $ every 2 (jux rev)
  $ sound "bd:2*16"
  # squiz (wchoose [(2, 3), (0.1, 8)])
  # gain (wchoose [(0.5, 4), (0.7, 2), (1.0, 1)])
  # pan rand

d1
  $ sound "<bd*8 bd*4> bd*6"
  # pan rand
  # speed (1 <~ (range 1 4 rand))

--------------------------------------------------------------------------------
-- week 4 lesson 3
--------------------------------------------------------------------------------

-- randcat, but first cat
d1 $ sound (cat ["bd sn", "arpy clap"])

-- I think that previous pattern is the same as
d1
  $ slow 2
  $ sound "bd sn arpy clap"

-- and now, on to randcat
d1
  -- $ sound (randcat ["bd sn", "arpy clap", "cpu(5,8)"])
  $ vowel (randcat ["a e i ~"])
  # sound "kick <snare:4 snare:3> clap"

:t randcat

-- wrandcat is like randcat but with weights
d1
  $ fast 2
  $ sound (wrandcat [
            ("bd sn!2 bd sn bd!2 sn", 0.5)
            ,("arpy clap", 0.5)
            ,("cpu(5,8)", 0.25)
            ])

-- stripe
-- for some reason it runs wayyyy faster than what yaxu's pattern
-- sounds like in the video https://www.youtube.com/watch?v=nRMWkKTjsRk&t=555s
:t stripe

d1 $ stripe 8 $ n "0*2 3 ~ 4 2 4 3 ~" # s "cpu"

hush

d1 $ stripe 3 $ sound "bd sd ~ [mt ht]"

d1 $ slowstripe 3 $ sound "bd sd ~ [mt ht]" # gain 0.8

d2 $ sound "cp"

-- playing with some patterns stolen from here while I was looking for help with stripe
-- https://club.tidalcycles.org/t/week-4-lesson-3-random-marathon-part-2-randcat-stripe-degrade-sometimes-somecycles-randslice-more/690/4
d1 $ splice 8 (segment 7 $ irand 8) $ s "break:4"

d2 $ s "<cpu cpu(2,7) cpu(3,7) cpu(4,7)>"

-- degrade

:t degrade

:t degradeBy

d1 $ degrade $ s "bd*16"

d1 $ degradeBy 0.8 $ s "bd*16"

d1 $ degradeBy "0.1 0.9" $ s "bd*16"

d2 $ s "~ clap"

-- sometimes
d1
  $ sometimes (fast 2)
  $ sometimes (hurry 2)
  -- $ fast 2
  $ n "3 4 ~ 9 7 8 2 ~"
  # s "cpu"

-- sometimesBy
d1
  $ sometimesBy 0.3 (# squiz 4)
  $ sometimes (fast 2)
  $ sometimes (hurry 2)
  $ fast 2
  $ n "3 4 ~ 9 7 8 2 ~"
  # s "cpu"

d2 $ s "~ clap"

d2 $ silence

-- someCycles
d1
  -- $ someCycles (\p -> (hurry 2 p) # squiz 5)
  -- $ someCycles (rev . fast 2)
  -- $ fast 2
  $ every 4 (hurry 2)
  $ n "{4!8, 0 ~!3 2 ~!3}"
  # s "cpu"

:t squiz

-- randslice
d1
  $ loopAt 1
  $ fast 4
  $ randslice 4
  -- $ slice 4 "0 ~ ~ ~"
  -- $ slice 4 "0 ~ [1 2] [3 4]*2"
  $ s "break:8"
  -- # n (run 4)
  -- # legato 2

d1 $ slice 8 (segment 8 $ irand 8) $ s "break:8"

d1 $ splice 8 (segment 8 $ irand 8) $ s "break:8"

-------------------------------------------------------------------------------------
-- week 5 lesson 1
-- https://tidalcycles.org/docs/patternlib/tutorials/course2#lesson-1-musical-notes
-------------------------------------------------------------------------------------

note "-12"

note "c3"

note "0 ~ 3 4 5 ~ 6 ~"

d1 $ note "1 2 3 4 5 6 7 8" # sound "superpiano"

d1 $ note "4" # sound "supermandolin"

d2 $ note "4.25!8" # sound "supermandolin"

d3 $ note "4.5!6" # sound "supermandolin"

d1 $ n "c2 ~ ~ 3 ~ ~ 2 ~" # sound "superpiano"

d1 $ n "c2 ~ ~ 3 ~ ~ 2 ~" # sound "superpiano" |+ n 2

d1 $ qtrigger $ note "c0 ~ ~ 3 ~ ~ 2 ~" # sound "superpiano"

d1 $ every 3 (slow 1.5) $ every 2 (fast 2) $ n "c g ~ ds" # s "superpiano"

d1 $ n "c a f e" # sound "superpiano"

d2 $ note "c a f e" # s "dbass"

d1 $ n "0 1 2 3" # s "rash" |+ 24

d1 $ fast 2 $ n "12 13 14 15" # s "rash" |+ n "24 [36 31]"

d1 $ n "60" # s "rash"

d1 $ n "0 1" # sound "dsynth"

d1
  $ n ("c a f e" |+ 24 |+ "<0 2 7 12>")
  # sound "rash"

d1
  $ n "c ~ g ~ a f ~ e"
  # sound "rash"
  |+ n "<36 48>"

:t octave

----------------------------------------------------------------------------------------------------
-- week 5 lesson 2
-- https://tidalcycles.org/docs/patternlib/tutorials/course2#lesson-2-chords-arpeggios-and-algoraoke
----------------------------------------------------------------------------------------------------

n "'maj"

n "a3'maj"

d1
  $ qtrigger
  $ slow 2
  $ n "c'min ~!2 a4'maj ~!4 c'min ~!2 f4'min ~!2 f4'min ~"
  # sound "supermandolin"
  # legato 2
  # gain 1.3

-- radiohead creep chord progression
-- ok I radiohead in there initially but
-- then asked chatgpt to give me a jazz
-- chord progression
d1
  $ jux ((|- n "12") . rev)
  $ struct "t(5,8,<0 4>)"
  $ n "<d'min7 g'maj7 c'maj7 a'maj7>"
  # s "supermandolin"
  -- # room 0.8
  -- # sz 0.9

import Sound.Tidal.Chords

chordList

d1 $ n "0!4" # s "odx"

d1
  $ arp "down pinkyup"
  $ note "[0,4,8,10,13]"
  # s "iacdriver"
  # midichan 5

:t arp

hush

setcps 7

setcps (180 / 60 / 4)
